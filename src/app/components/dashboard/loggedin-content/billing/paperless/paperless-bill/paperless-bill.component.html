<div class="row margin-top mt24">
  <div class="col-md col1-image">
      <img src="./assets/img/images/paperless.png" alt="Paperless trees" />
  </div>
  <div class="col-md">
    <p class="no-margin">e-Pay or Autopay is our Electronic Funds Transfer (EFT) payment option.</p>
    <p class="no-margin">It is automatically done for you each month.</p>
    <p class="no-margin"><strong>Combine with e-POLICY to get our Paperless Discount!</strong></p>

    <h2 class="title no-border margin-top mt32">
      Policies Elegible
    </h2>
    <table mdbTable class="paperless-table">
      <tbody class="med-grey-color">
        <tr class="row-content border-full grey-border property enroll padding-vertical pv8" *ngFor="let pdetail of user.policyDetails">
        
          <td class="no-padding-left padding-right pr8 padding-vertical pv8 type-image">
              <img src="./assets/img/images/house_bg.png" width="20" *ngIf="pdetail.policyType == 'HOME'" />
              <img src="./assets/img/images/car_background.png" width="20" *ngIf="pdetail.policyType == 'AUTO'" />
            </td>
            <td class="no-padding-left policy-type-id padding-vertical pv8 align-middle padding-right pr8  width w-20">{{ pdetail.policyType }} &ndash; {{ pdetail.policynumber.policynumber }} </td>
            <td class="no-padding green-text padding-vertical pv8 align-middle">{{ pdetail.effDate | date:'shortDate' }} to {{ pdetail.expDate | date:'shortDate' }}</td>
            
            <td class="padding-vertical pv8 enroll-button align-middle" *ngIf="pdetail.policyFlags.isEbill == true">
              <mapfre-modal 
                [modalOptions]="endEnrollOptionsModal"
                [hideModal]="hideModal"
                (hideModalOutput)="resetHideModal($event)">
                <div class="modal-body">
                  <hr class="margin-bottom mb24 no-margin-top" />
                  <div class="margin-bottom mb24">
                      Are you sure you want to remove policy <strong>{{ pdetail.policynumber.policynumber }}</strong> from e-Bill?
                  </div>
                  <div class="mx-auto text-center">
                      <mapfre-button 
                        additionalClasses="basic default padding-vertical pv16 margin-bottom mb24 w-50 waves-effect"
                        (click)="cancellEnroll(pdetail.policynumber.policynumber, 'e-bill'); hideModalAction($event)">
                        REMOVE FROM E-Bill
                      </mapfre-button>
                      <mapfre-button 
                        additionalClasses="ghost secondary padding-vertical pv16  w-50"
                        (click)="hideModalAction($event)">
                        CANCEL
                      </mapfre-button>
                  </div>
                </div>
              </mapfre-modal>
              <div class="float-right align-middle enrolled-icon"><svg-check-icon-svg></svg-check-icon-svg> <span class="green-text">Enrolled</span></div>
            </td>
            <td class="padding-vertical pv8 enroll-button align-middle pending" *ngIf="pdetail.policyFlags.isEbill == 'enrollment-pending'">
                <i class="fas fa-info-circle margin-right mr8"></i> <span>Pending enrollment</span>
              </td>
              <td class="padding-vertical pv8 enroll-button align-middle pending" *ngIf="pdetail.policyFlags.isEbill == 'removal-pending'">
                  <i class="fas fa-info-circle margin-right mr8"></i> <span>Pending removal</span>
                </td>
            <td class="padding-vertical pv8 enroll-button align-middle" *ngIf="pdetail.policyFlags.isEbill == false">
              <mapfre-modal 
                [modalOptions]="enrollOptionsModal"
                [hideModal]="hideModal"
                (hideModalOutput)="resetHideModal($event)">
                <div class="modal-body">
                  <hr class="margin-bottom mb24 no-margin-top" />
                  <div class="margin-bottom mb24">
                      Are you sure you want to remove policy <strong>{{ pdetail.policynumber.policynumber }}</strong> from e-Bill?
                  </div>
                  <div class="mx-auto text-center">
                      <mapfre-button 
                        additionalClasses="basic primary padding-vertical pv16 margin-bottom mb24 w-50 waves-effect"
                        (click)="enroll(pdetail.policynumber.policynumber, 'e-bill'); hideModalAction($event)">
                        Confirm Enrollment
                      </mapfre-button>
                      <mapfre-button 
                        additionalClasses="ghost secondary padding-vertical pv16  w-50 waves-effect"
                        (click)="hideModalAction($event)">
                        CANCEL
                      </mapfre-button>
                  </div>
                </div>
              </mapfre-modal>
            </td>
        </tr>
      </tbody>
    </table>

    <h2 class="title margin-top mt32">
      Enroll to send e-Bill
    </h2>
    <div class="row margin-top mt16">
      <div class="col">
        {{ 'EMAIL' | translate }}: &nbsp;&nbsp; <strong>test@test.com</strong>
      </div>
      <div class="col text-right">
        <a class="mapfre link edit-link float-right" [routerLink]="['/profile','verify-password']"> 
          <span class="float-left margin-right mr8">update </span> <span class="float-left"><svg-edit-icon-svg></svg-edit-icon-svg></span>
        </a>
      </div>
    </div>

    <div class="row margin-top mt32">
      <div class="col">
        <mapfre-button
          [additionalClasses]="'flat link small waves-effect'"
          [customIcon]="'./assets/img/icons/back-arrow.png'"
          [iconClasses]="'align-middle'"
          [routerLink]="['/billing/paperless/e-pay']"
          [showIconsCustom]="true">  
          {{ 'BACK' | translate }}
        </mapfre-button>
      </div>
      <div class="col">
        <mapfre-button 
          additionalClasses="primary basic w-75 padding-top padding-bottom pt8 pb8 float-right no-margin waves-effect"
          [routerLink]="['/billing/paperless']">
          {{ 'FINISH' | translate }}
        </mapfre-button>
      </div>
    </div>
  </div>
</div>
