<app-account-header></app-account-header>
<div class="mapfre-content container loggedin container-fluid">
  <div class="row">
    <app-sidenav></app-sidenav>

    <div class="col main-column">
      <mapfre-alert></mapfre-alert>
      <ng-container *ngFor="let policy of user.policyDetails">
        
        <!-- Auto -->
        <mapfre-card 
          [singleCard]="false"
          *ngIf="policy.policyType == 'AUTO' "
          [additionalClasses]="'dashboard-policies auto'">
            
            <div class="row" [ngClass]="{ 'no-pay': policy.balance == 0, 'pay': policy.balance != 0 }">
              <div class="policy-background col">
                <div class="car"></div>
              </div>
              <div class="policy-content">
                  <h2 class="row">
                    <div class="col-6 title">{{ policy?.policyType | translate}} &ndash; <strong> {{ policy?.policynumber.policynumber }} </strong></div>
                    <div class="text-right col-6"
                    [ngClass]="{'green-color': policy.policyStatus != 'INACTIVE', 
                      'red-color': policy.policyStatus == 'INACTIVE' }">
                      <ng-container *ngIf="policy.policyStatus == 'INACTIVE' ">
                        <small>{{policy.policyStatus | translate}}</small>
                      </ng-container>
                      <ng-container *ngIf="policy.policyStatus == 'ACTIVE'">
                        <small>{{policy.effDate | date:'shortDate' }} {{ 'TO' |translate }} {{policy.expDate | date:'shortDate' }}</small>
                      </ng-container>
                    </div>
                  </h2>
                  <div class="row policy-row">
                    <div class="col">
                      <div class="policy-icon">
                          <svg-car-mono-color-small-svg></svg-car-mono-color-small-svg>
                      </div>
                      <div class="policy-info">
                        <div class="policy-info-content" [class.show-more-detail]= "hideOrShow">
                          <ng-container *ngFor="let vehicles of policy.vehicle; let last = last">
                              {{ vehicles.vehicle }}<ng-container *ngIf="!last">, </ng-container>
                          </ng-container>
                        </div>
                        <div class="policy-info-link" *ngIf="policy.vehicle.length > 1"><a (click)="showMore($event)" class="show-more-button">+{{policy.vehicle.length-1 }} {{ 'MORE' | translate}}</a></div>
                      </div>
                    </div>
                  </div>
                  <div class="row policy-row">
                    <div class="col">
                      <div class="policy-icon holder-icon">
                        <svg-holder-mono-color-svg></svg-holder-mono-color-svg>
                      </div>
                      <div class="policy-info">
                        <div class="policy-info-content" [class.show-more-detail]= "hideOrShow"> Holder:
                          <ng-container *ngFor="let insurer of policy.insurer; let last = last">
                            {{insurer['Insurer Name'] | titlecase }}<ng-container *ngIf="!last">, </ng-container>
                          </ng-container>
                        </div>
                        <div class="policy-info-link" *ngIf="policy.insurer.length > 1">
                            <a (click)="showMore($event)" class="show-more-button">
                              +{{policy.insurer.length-1 }} {{ 'MORE' | translate}}
                            </a>
                          </div>
                      </div>
                    </div>
                  </div>
                  <div class="row policy-row">
                    <div class="col">
                      <div class="policy-icon">
                        <svg-money-mono-color-svg></svg-money-mono-color-svg>
                      </div>
                      <div class="policy-info">
                        <ng-container *ngIf="policy.balance == 0">
                          {{ 'BALANCE' | translate}} <span class="green-color">{{'NO_PAYMENTS_DUE' | translate}}</span>
                        </ng-container>
                        <ng-container *ngIf="policy.balance != 0">
                            {{ 'OUTSTANDING_BALANCE' | translate}}: <strong>{{policy.balance | currency}}</strong>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                  <ng-container *ngIf="policy.balance != 0">
                    <div class="row policy-row">
                      <div class="col">
                        <div class="policy-icon">
                          <svg-calendar-mono-color-svg></svg-calendar-mono-color-svg>
                        </div>
                        <div class="policy-info pay-now">
                          <div class="date-amount">
                            {{ 'NEXT' | translate}}: {{policy.nextDueDate | date: 'shortDate'}}
                            <strong>{{policy.nextDueAmount | currency}}</strong>
                          </div>
                          <div class="pay-now-button">
                              <mapfre-button
                              [additionalClasses]="'ghost primary xsmall'"
                              [routerLink]="['/paynow']">{{ 'PAY_NOW' | translate}}</mapfre-button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
            </div>
            <div class="clear-fix"></div>
            <a 
            [routerLink]="['/my-insurance', policy.policynumber.policynumber, 'details']" 
            class="policy-link waves-light"
            mdbWavesEffect 
            > 
              {{ 'Details_Billing_Documents' | translate }} 
              <svg-arror-right-svg></svg-arror-right-svg>
            </a>
          </mapfre-card>

        <!-- Property -->
        <mapfre-card 
          [singleCard]="false"
          [additionalClasses]="'dashboard-policies property'"
          *ngIf="policy.policyType == 'PROPERTY'">
          <div class="row" [ngClass]="{ 'no-pay': policy.balance == 0, 'pay': policy.balance != 0 }">
            <div class="policy-background col">
                <div class="house"></div>
            </div>
            <div class="policy-content">
                <h2 class="row">
                  <div class="col-6 title">{{ policy?.policyType | translate }} &ndash; <strong> {{ policy?.policynumber.policynumber }} </strong></div>
                  <div class="text-right col-6"
                  [ngClass]="{'green-color': policy.policyStatus != 'INACTIVE', 
                    'red-color': policy.policyStatus == 'INACTIVE' }">
                    <ng-container *ngIf="policy.policyStatus == 'INACTIVE' ">
                      <small>{{policy.policyStatus | translate}}</small>
                    </ng-container>
                    <ng-container *ngIf="policy.policyStatus == 'ACTIVE'">
                      <small>{{policy.effDate | date:'shortDate' }} {{ 'TO' |translate }} {{policy.expDate | date:'shortDate'}}</small>
                    </ng-container>
                  </div>
                </h2>
                <div class="row policy-row">
                  <div class="col">
                    <div class="policy-icon home-icon">
                        <svg-house-mono-color-small-svg></svg-house-mono-color-small-svg>
                    </div>
                    <div class="policy-info">
                      <div class="policy-info-content">
                        {{ policy.address }}
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row policy-row">
                  <div class="col">
                      <div class="policy-icon holder-icon">
                          <svg-holder-mono-color-svg></svg-holder-mono-color-svg>
                        </div>
                    <div class="policy-info">
                        <div class="policy-info-content" [class.show-more-detail]= "hideOrShow"> Holder:
                          <ng-container *ngFor="let insurer of policy.insurer; let last = last">
                            {{insurer['Insurer Name'] | titlecase }}<ng-container *ngIf="!last">,</ng-container>
                          </ng-container>
                         
                        </div>
                        <div class="policy-info-link" *ngIf="policy.insurer.length > 1">
                            <a (click)="showMore($event)" class="show-more-button">
                              +{{policy.insurer.length-1 }} {{ 'MORE' | translate}}
                            </a>
                          </div>
                      </div>
                  </div>
                </div>
                <div class="row policy-row">
                  <div class="col">
                    <div class="policy-icon">
                      <svg-money-mono-color-svg></svg-money-mono-color-svg>
                    </div>
                    <div class="policy-info">
                      <ng-container *ngIf="policy.balance == 0">
                        {{'BALANCE' | translate }} <span class="green-color">{{'NO_PAYMENTS_DUE' | translate}}</span>
                      </ng-container>
                      <ng-container *ngIf="policy.balance != 0">
                          {{'OUTSTANDING_BALANCE' | translate}}: <strong>${{policy.balance}}</strong>
                      </ng-container>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="policy.balance != 0">
                  <div class="row policy-row">
                    <div class="col">
                      <div class="policy-icon">
                        <svg-calendar-mono-color-svg></svg-calendar-mono-color-svg>
                      </div>
                      <div class="policy-info pay-now">
                        <div class="date-amount">
                          {{'NEXT' | translate }}: {{policy.nextDueDate | date:'shortDate' }}
                          <strong>${{policy.nextDueAmount}}</strong>
                        </div>
                        <div class="pay-now-button">
                            <mapfre-button
                            [additionalClasses]="'ghost primary xsmall'"
                            [routerLink]="['/paynow']">{{ 'PAY_NOW' | translate}}</mapfre-button>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
          </div>
          <div class="clear-fix"></div>
          <a 
            mdbWavesEffect 
            [routerLink]="['/my-insurance', policy.policynumber.policynumber, 'details']" 
            class="policy-link"> 
            {{ 'Details_Billing_Documents' | translate }} 
            <svg-arror-right-svg></svg-arror-right-svg>
          </a>
        </mapfre-card>

      </ng-container>
    </div>


    <div class="column-misc">
      <mapfre-card 
        [singleCard]="false" 
        [additionalClasses]="'claims'">
        <div class="icon-title">
          <div class="alarm svg-container">
            <svg-alarm-color-svg></svg-alarm-color-svg>
          </div>
          <div class="grey-color small-font accident-copy claim-copy">
            {{ 'BEEN_IN_AN_ACCIDENT' | translate}}
          </div>
        </div>
        <div class="claim-desktop">
          <div class="report-claim">
            <a href="https://mcr.mapfreinsurance.com/claims/#/ReportClaim" class="mapfre link underline">
              <span>{{ 'REPORT_A_CLAIM' | translate}}</span>
              <i class="fas fa-angle-right"></i>
            </a>
          </div>
          <div class="contact">
            <div class="grey-color small-font claim-copy callus-copy">{{ 'OR_CALL_US' | translate}}</div>
            <div class="contact-url">
              <a href="tel:18002211605" class="mapfre link underline">1-800-221-1605</a>
            </div>
          </div>
        </div>

        <div class="claim-mobile">
          <a class="button-link grey-color ">
            <div>
              <i class="fas fa-phone fa-flip-horizontal"></i>
            </div>
            <div class="small-font grey-color">{{ 'CALL_US' | translate }}</div>
          </a>
          <a class="button-link grey-color">
              <div class="claim-icon svg-container">
                <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <defs>
                      <path d="M5.47577623,17.9423077 L5.47577623,18.547433 C5.46689993,18.5478612 5.45801572,18.5480769 5.44913151,18.5480769 C5.15136476,18.5480769 4.85359801,18.3057692 4.85359801,17.9423077 L4.85359801,11.8846154 C4.85359801,7.88653846 8.06947891,4.61538462 12,4.61538462 C15.9305211,4.61538462 19.146402,7.88653846 19.146402,11.8846154 L19.146402,17.9423077 L19.6228288,17.9423077 C20.516129,17.9423077 21.2307692,18.6692308 21.2307692,19.5778846 L21.2307692,22.3644231 C21.2307692,23.2730769 20.516129,24 19.6228288,24 L4.37717122,24 C3.48387097,24 2.76923077,23.2730769 2.76923077,22.3644231 L2.76923077,19.5778846 C2.76923077,18.6692308 3.48387097,17.9423077 4.37717122,17.9423077 L5.47577623,17.9423077 Z M8,12.9230769 C8.36923077,12.9230769 8.61538462,12.6769231 8.61538462,12.3076923 C8.61538462,10.2769231 10.2769231,8.61538462 12.3076923,8.61538462 C12.6769231,8.61538462 12.9230769,8.36923077 12.9230769,8 C12.9230769,7.63076923 12.6769231,7.38461538 12.3076923,7.38461538 C9.6,7.38461538 7.38461538,9.6 7.38461538,12.3076923 C7.38461538,12.6769231 7.63076923,12.9230769 8,12.9230769 Z M20.3076923,22.6461538 L20.3076923,19.8153846 C20.3076923,19.5692308 20.1230769,19.3846154 19.8769231,19.3846154 L4.12307692,19.3846154 C3.87692308,19.3846154 3.69230769,19.5692308 3.69230769,19.8153846 L3.69230769,22.6461538 C3.69230769,22.8923077 3.87692308,23.0769231 4.12307692,23.0769231 L19.8769231,23.0769231 C20.1230769,23.0769231 20.3076923,22.8923077 20.3076923,22.6461538 Z M11.5384615,3.69230769 C11.2615385,3.69230769 11.0769231,3.41880342 11.0769231,3.00854701 L11.0769231,0.683760684 C11.0769231,0.273504274 11.2615385,0 11.5384615,0 C11.8153846,0 12,0.273504274 12,0.683760684 L12,3.00854701 C12,3.35042735 11.8153846,3.69230769 11.5384615,3.69230769 Z M3.00854701,12 L0.683760684,12 C0.273504274,12 0,11.8153846 0,11.5384615 C0,11.2615385 0.273504274,11.0769231 0.683760684,11.0769231 L3.00854701,11.0769231 C3.41880342,11.0769231 3.69230769,11.2615385 3.69230769,11.5384615 C3.69230769,11.8153846 3.35042735,12 3.00854701,12 Z M23.3162393,12 L20.991453,12 C20.5811966,12 20.3076923,11.8153846 20.3076923,11.5384615 C20.3076923,11.2615385 20.5811966,11.0769231 20.991453,11.0769231 L23.3162393,11.0769231 C23.7264957,11.0769231 24,11.2615385 24,11.5384615 C24,11.8153846 23.7264957,12 23.3162393,12 Z M18.1678322,6.46153846 C17.979021,6.46153846 17.8531469,6.3986014 17.7272727,6.27272727 C17.4755245,6.02097902 17.4755245,5.64335664 17.7272727,5.39160839 L19.2377622,3.88111888 C19.4895105,3.62937063 19.8671329,3.62937063 20.1188811,3.88111888 C20.3706294,4.13286713 20.3706294,4.51048951 20.1188811,4.76223776 L18.6083916,6.27272727 C18.4825175,6.3986014 18.3566434,6.46153846 18.1678322,6.46153846 Z M5.83216783,6.46153846 C5.64335664,6.46153846 5.51748252,6.3986014 5.39160839,6.27272727 L3.88111888,4.76223776 C3.62937063,4.51048951 3.62937063,4.13286713 3.88111888,3.88111888 C4.13286713,3.62937063 4.51048951,3.62937063 4.76223776,3.88111888 L6.27272727,5.39160839 C6.52447552,5.64335664 6.52447552,6.02097902 6.27272727,6.27272727 C6.14685315,6.3986014 5.95804196,6.46153846 5.83216783,6.46153846 Z" id="activeclaims1"></path>
                  </defs>
                  <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="06_Navigation/blocks/sidebar/link_icon_selected" transform="translate(-32.000000, -12.000000)">
                          <g id="04_Icons/small/claims_filled" transform="translate(32.000000, 12.000000)">
                              <mask id="activeclaimsmask1-2" fill="white">
                                  <use xlink:href="#activeclaims1"></use>
                              </mask>
                              <use id="Mask" fill="#FFFFFF" fill-rule="nonzero" xlink:href="#activeclaims1"></use>
                              <g id="00_Basic/Colors/blue2" mask="url(#activeclaimsmask1-2)" fill="#006580" fill-rule="evenodd">
                                  <polygon id="box" points="0 0 24 0 24 24 0 24"></polygon>
                              </g>
                          </g>
                      </g>
                  </g>
                </svg>
              </div>
              <div class="small-font grey-color">
                {{ 'REPORT_A_CLAIM' | translate}}
              </div>
            </a>
        </div>

      </mapfre-card>
    </div>
  </div>
</div>

