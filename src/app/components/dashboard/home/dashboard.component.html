<<<<<<< HEAD
=======
<!-- <button (click)="onClick()"> CLICK ME</button> -->

>>>>>>> 345eb8b0a72de5bd67981a352d540e8d21710320
<ng-container *ngFor="let policy of user?.policyDetails">
  
  <!-- Auto -->
  <mapfre-card 
    [singleCard]="false"
    *ngIf="policy?.policyType == 'AUTO' "
    [additionalClasses]="'dashboard-policies auto'">
      
      <div class="row" [ngClass]="{ 'no-pay': policy?.balance == 0, 'pay': policy?.balance != 0 }">
        <div class="policy-background col">
          <div class="car"></div>
        </div>
        <div class="policy-content col">
            <h2 class="row">
              <div class="col-6 title">{{ policy?.policyType | translate}} &ndash; <strong> {{ policy?.policynumber.policynumber }} </strong></div>
              <div class="text-right col-6"
              [ngClass]="{'green-color': policy?.policyStatus != 'INACTIVE', 
                'red-color': policy?.policyStatus == 'INACTIVE' }">
                <ng-container *ngIf="policy?.policyStatus == 'INACTIVE' ">
                  <small>{{policy?.policyStatus | translate}}</small>
                </ng-container>
                <ng-container *ngIf="policy?.policyStatus == 'ACTIVE'">
                  <small>{{policy?.effDate | customDateFormat }} {{ 'TO' |translate }} {{policy?.expDate | customDateFormat }}</small>
                </ng-container>
              </div>
            </h2>
            <div class="row policy-row">
              <div class="col">
                <div class="policy-icon">
                    <svg-car-mono-color-small-svg></svg-car-mono-color-small-svg>
                </div>
                <div class="policy-info">
                  <div class="policy-info-content" [class.show-more-detail]= "hideOrShow">
                    <ng-container *ngFor="let vehicles of policy?.vehicle; let last = last">
                        {{ vehicles.vehicle }}<ng-container *ngIf="!last">, </ng-container>
                    </ng-container>
                  </div>
                  <div class="policy-info-link" *ngIf="policy?.vehicle.length > 1"><a (click)="showMore($event)" class="show-more-button">+{{policy?.vehicle.length-1 }} {{ 'MORE' | translate}}</a></div>
                </div>
              </div>
            </div>
            <div class="row policy-row">
              <div class="col">
                <div class="policy-icon holder-icon">
                  <svg-holder-mono-color-svg></svg-holder-mono-color-svg>
                </div>
                <div class="policy-info">
                  <div class="policy-info-content" [class.show-more-detail]= "hideOrShow"> Holder:
                    <ng-container *ngFor="let insurer of policy?.insurer; let last = last">
                      {{insurer['Insurer Name'] | titlecase }}<ng-container *ngIf="!last">, </ng-container>
                    </ng-container>
                  </div>
                  <div class="policy-info-link" *ngIf="policy?.insurer.length > 1">
                      <a (click)="showMore($event)" class="show-more-button">
                        +{{policy?.insurer.length-1 }} {{ 'MORE' | translate}}
                      </a>
                    </div>
                </div>
              </div>
            </div>
            <div class="row policy-row">
              <div class="col">
                <div class="policy-icon">
                  <svg-money-mono-color-svg></svg-money-mono-color-svg>
                </div>
                <div class="policy-info">
                  <ng-container *ngIf="policy?.balance == 0">
                    {{ 'BALANCE' | translate}} <span class="green-color">{{'NO_PAYMENTS_DUE' | translate}}</span>
                  </ng-container>
                  <ng-container *ngIf="policy?.balance != 0">
                      {{ 'OUTSTANDING_BALANCE' | translate}}: <strong>{{policy?.balance | currency}}</strong>
                  </ng-container>
                </div>
              </div>
            </div>
            <ng-container *ngIf="policy?.balance != 0">
              <div class="row policy-row">
                <div class="col">
                  <div class="policy-icon">
                    <svg-calendar-mono-color-svg></svg-calendar-mono-color-svg>
                  </div>
                  <div class="policy-info pay-now">
                    <div class="date-amount">
                      {{ 'NEXT' | translate}}: {{policy?.nextDueDate |  customDateFormat }}
                      <strong>{{policy?.nextDueAmount | currency}}</strong>
                    </div>
                    <div class="pay-now-button">
                      <mapfre-modal 
                        [modalOptions]="payNowModal">
                        <div class="modal-body">
                          <hr class="margin-bottom mb24 no-margin-top" />
                          <div class="modal-body-content">
                            <div class="row text-center margin-top mt16">
                              <div class="col-md-6 col-sm-12">
                                  <mapfre-link
                                    [additionalClasses]="'ghost primary large btn'"
                                    [url]="['/billing/new-payment/' +  policy?.policynumber.policynumber]">
                                    {{ 'PAY_BY_CHECK' | translate}}
                                  </mapfre-link>
                              </div>
                              <div class="col-md-6 col-sm-12">
                                <mapfre-link
                                  [additionalClasses]="'ghost primary large btn'"
                                  [url]="'https://www.mapfreinsurance.com/b2cwebapp/view/billing?policyNumber=' + policy?.policynumber.policynumber + '&source=makePayment&selectedTabIdx=1&fragments=main&mode=embedded'"
                                  target="_blank">
                                  {{ 'PAY_BY_CREDIT_CARD' | translate}}
                                </mapfre-link>
                              </div>
                            </div>
                          </div>
                        </div>
                      </mapfre-modal>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
      </div>
      <div class="clear-fix"></div>
      <a 
        mdbWavesEffect 
        [routerLink]="['/my-insurance', policy?.policynumber.policynumber, 'details']" 
        class="policy-link  waves-light d-block"> 
        {{ 'Details_Billing_Documents' | translate }} 
        <svg-arror-right-svg></svg-arror-right-svg>
      </a>
    </mapfre-card>
    
  <!-- HOME -->
  <mapfre-card 
    [singleCard]="false"
    [additionalClasses]="'dashboard-policies property'"
    *ngIf="policy?.policyType == 'HOME'">
    <div class="row" [ngClass]="{ 'no-pay': policy?.balance == 0, 'pay': policy?.balance != 0 }">
      <div class="policy-background col">
          <div class="house"></div>
      </div>
      <div class="policy-content col">
          <h2 class="row">
            <div class="col-6 title">{{ policy?.policyType | translate }} &ndash; <strong> {{ policy?.policynumber.policynumber }} </strong></div>
            <div class="text-right col-6"
            [ngClass]="{'green-color': policy?.policyStatus != 'INACTIVE', 
              'red-color': policy?.policyStatus == 'INACTIVE' }">
              <ng-container *ngIf="policy?.policyStatus == 'INACTIVE' ">
                <small>{{policy?.policyStatus | translate}}</small>
              </ng-container>
              <ng-container *ngIf="policy?.policyStatus == 'ACTIVE'">
                <small>{{policy?.effDate | customDateFormat }} {{ 'TO' |translate }} {{policy?.expDate | customDateFormat}}</small>
              </ng-container>
            </div>
          </h2>
          <div class="row policy-row">
            <div class="col">
              <div class="policy-icon home-icon">
                  <svg-house-mono-color-small-svg></svg-house-mono-color-small-svg>
              </div>
              <div class="policy-info">
                <div class="policy-info-content">
                  {{ policy?.property[0].address.streetName }}  {{ policy?.property[0].address.city }}  {{ policy?.property[0].address.state }}  {{ policy?.property[0].address.zipCode.code }}
                </div>
              </div>
            </div>
          </div>
          <div class="row policy-row">
            <div class="col">
                <div class="policy-icon holder-icon">
                    <svg-holder-mono-color-svg></svg-holder-mono-color-svg>
                  </div>
              <div class="policy-info">
                  <div class="policy-info-content" [class.show-more-detail]= "hideOrShow"> Holder:
                    <ng-container *ngFor="let insurer of policy?.insurer; let last = last">
                      {{insurer['Insurer Name'] | titlecase }}<ng-container *ngIf="!last">,</ng-container>
                    </ng-container>
                    
                  </div>
                  <div class="policy-info-link" *ngIf="policy?.insurer.length > 1">
                      <a (click)="showMore($event)" class="show-more-button">
                        +{{policy?.insurer.length-1 }} {{ 'MORE' | translate}}
                      </a>
                    </div>
                </div>
            </div>
          </div>
          <div class="row policy-row">
            <div class="col">
              <div class="policy-icon">
                <svg-money-mono-color-svg></svg-money-mono-color-svg>
              </div>
              <div class="policy-info">
                <ng-container *ngIf="policy?.balance == 0">
                  {{'BALANCE' | translate }} <span class="green-color">{{'NO_PAYMENTS_DUE' | translate}}</span>
                </ng-container>
                <ng-container *ngIf="policy?.balance != 0">
                    {{'OUTSTANDING_BALANCE' | translate}}: <strong>${{policy?.balance}}</strong>
                </ng-container>
              </div>
            </div>
          </div>
          <ng-container *ngIf="policy?.balance != 0">
            <div class="row policy-row">
              <div class="col">
                <div class="policy-icon">
                  <svg-calendar-mono-color-svg></svg-calendar-mono-color-svg>
                </div>
                <div class="policy-info pay-now">
                  <div class="date-amount">
                    {{'NEXT' | translate }}: {{policy?.nextDueDate | customDateFormat }}
                    <strong>${{policy?.nextDueAmount}}</strong>
                  </div>
                  <div class="pay-now-button">
                      <mapfre-modal 
                        [modalOptions]="payNowModal">
                        <div class="modal-body">
                          <hr class="margin-bottom mb24 no-margin-top" />
                          <div class="modal-body-content">
                            <div class="row text-center margin-top mt16">
                              <div class="col-md-6 col-sm-12">
                                  <mapfre-link
                                  [additionalClasses]="'ghost primary large btn'"
                                  [url]="['/billing/new-payment/' +  policy?.policynumber.policynumber]">
                                  {{ 'PAY_BY_CHECK' | translate}}
                                </mapfre-link>
                              </div>
                              <div class="col-md-6 col-sm-12">
                                <mapfre-link
                                  [additionalClasses]="'ghost primary large btn'"
                                  [url]="'https://www.mapfreinsurance.com/b2cwebapp/view/billing?policyNumber=' + policy?.policynumber.policynumber + '&source=makePayment&selectedTabIdx=1&fragments=main&mode=embedded'"
                                  target="_blank">
                                  {{ 'PAY_BY_CREDIT_CARD' | translate}}
                                </mapfre-link>
                              </div>
                            </div>
                          </div>
                        </div>
                      </mapfre-modal>
                    </div>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
    </div>
    <div class="clear-fix"></div>
    <a 
      mdbWavesEffect 
      [routerLink]="['/my-insurance', policy?.policynumber.policynumber, 'details']" 
      class="policy-link  waves-light d-block"> 
      {{ 'Details_Billing_Documents' | translate }} 
      <svg-arror-right-svg></svg-arror-right-svg>
    </a>
  </mapfre-card>

</ng-container>
<div class="row">
  <div class="col">
      Have other MAPFRE policies not listed here?  <a [routerLink]="['/policy/add']">Add policy number</a>
  </div>
</div>
