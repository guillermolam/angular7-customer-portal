<div class="row">
  <div class="col">
    <div [formGroup]="form" class="input-field mapfre">
      <div [ngSwitch]="input.icon" class="prefix">
        <i [class]="input.iconClasses" *ngSwitchCase="true"></i>
      </div>
      <div *ngIf="input.type == 'email'">
        <input
          [formControlName]="input.key" 
          [class]="input.additionalClasses" 
          [type]="input.type"Â 
          [id]="input.key" 
          [name]="input.key" 
          mdbInputDirective
          email
         />
        <mapfre-label [forInput]="input.key">{{input.label}}</mapfre-label>
      </div>
      <div *ngIf="input.type == 'password'">
        <input
          [formControlName]="input.key" 
          [class]="input.additionalClasses" 
          [type]="showPassword ? 'text' : 'password'"
          [id]="input.key" 
          [name]="input.key" 
          mdbInputDirective
         />
        <mapfre-icon 
          password="true" 
          [showIconsForPassword]="input.showPasswordIcon"
          (onClickShowPassword)="showPasswordFunction($event)">
        </mapfre-icon>
        <mapfre-label [forInput]="input.key">{{input.label}}</mapfre-label>
        <div *ngIf="input.key != 'repeatPassword'; else repeatPassword"></div>
      </div>
      <div *ngIf="input.type != 'email' && input.type != 'password' ">
        <input
          [formControlName]="input.key" 
          [class]="input.additionalClasses" 
          [type]="input.type"
          [id]="input.key" 
          [name]="input.key"
          [(ngModel)]="input.value"  
          mdbInputDirective
        />
        <mapfre-label [forInput]="input.key">{{input.label}}</mapfre-label>
      </div>
      <div class="help-block" *ngIf="(input.key != 'createPassword') && (input.key != 'repeatPassword')">
        <div class="error" *ngIf="!isValid">{{input.label}} is required</div>
      </div>
    </div>
  </div>
</div>

<ng-template #repeatPassword>
  <!-- Possiblly try to turn some of this into an object then just loop through it -->
  <section [ngClass]="{'show-validation': !passwordRules('all'), 'hide-validation': passwordRules('all') }">
    <div class="row">
      <div class="col">
        {{ 'YOUR_PASSWORD_SHOULD_BE' | translate }}
      </div>
    </div>
    <div class="row" [ngClass]="{'valid': passwordRules('ruleOne'), 'error': !passwordRules('ruleOne')}">
      <div class="col">
        <i class="fas fa-times-circle"></i>
        <span class="sr-only sr-only-focusable" *ngIf="!passwordRules('ruleOne')">{{ 'DOES_NOT_PASS' | translate }}</span>
        <span class="sr-only sr-only-focusable" *ngIf="passwordRules('ruleOne')">{{ 'PASSES_THE_RULE' | translate }}</span>
      </div>
      <div class="col">
        {{ 'PASSWORD_RULE_ONE' | translate }}
      </div>
    </div>
    <div class="row" [ngClass]="{'valid': passwordRules('ruleTwo'), 'error': !passwordRules('ruleTwo')}">
      <div class="col">
        <i class="fas fa-times-circle"></i>
        <span class="sr-only sr-only-focusable" *ngIf="!passwordRules('ruleTwo')">{{ 'DOES_NOT_PASS' | translate }}</span>
        <span class="sr-only sr-only-focusable" *ngIf="passwordRules('ruleTwo')">{{ 'PASSES_THE_RULE' | translate }}</span>
      </div>
      <div class="col">
          {{ 'PASSWORD_RULE_TWO' | translate }}
      </div>
    </div>
    <div class="row" [ngClass]="{'valid': passwordRules('ruleThree'), 'error': !passwordRules('ruleThree')}">
      <div class="col">
        <i class="fas fa-times-circle"></i>
        <span class="sr-only sr-only-focusable" *ngIf="!passwordRules('ruleThree')">{{ 'DOES_NOT_PASS' | translate }}</span>
        <span class="sr-only sr-only-focusable" *ngIf="passwordRules('ruleThree')">{{ 'PASSES_THE_RULE' | translate }}</span>
      </div>
      <div class="col">
          {{ 'PASSWORD_RULE_THREE' | translate }}
      </div>
    </div>
    <div class="row" [ngClass]="{'valid': passwordRules('ruleFour'), 'error': !passwordRules('ruleFour')}">
      <div class="col">
        <i class="fas fa-times-circle"></i>
        <span class="sr-only sr-only-focusable" *ngIf="!passwordRules('ruleFour')">{{ 'DOES_NOT_PASS' | translate }}</span>
        <span class="sr-only sr-only-focusable" *ngIf="passwordRules('ruleFour')">{{ 'PASSES_THE_RULE' | translate }}</span>
      </div>
      <div class="col">
          {{ 'PASSWORD_RULE_FOUR' | translate }}
      </div>
    </div>
    <div class="row" [ngClass]="{'valid': passwordRules('ruleFive'), 'error': !passwordRules('ruleFive')}">
        <div class="col">
          <i class="fas fa-times-circle"></i>
          <span class="sr-only sr-only-focusable" *ngIf="!passwordRules('ruleFive')">{{ 'DOES_NOT_PASS' | translate }}</span>
          <span class="sr-only sr-only-focusable" *ngIf="passwordRules('ruleFive')">{{ 'PASSES_THE_RULE' | translate }}</span>
        </div>
      <div class="col">
          {{ 'PASSWORD_RULE_FIVE' | translate }}
      </div>
    </div>
  </section>
</ng-template>

